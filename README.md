# Сервер авторизации и регистрации

Сервер для получения **access_token** и **refresh_token**.


`access_token` прекращает действие каждые 15 минут;

`refresh_token` прекращает действие каждые 7 дней.

###### FastAPI, JWT, access_token, refresh_token, QR-auth, Authorization, Registration, email, phone

## Возможности

- Возможность регистрации по **номеру телефона**;
- Возможность регистрации по **почте**;
- Подтверждение почты и номера телефона (**актуальность данных - 5 минут**)
- Возможность авторизации по **QR-коду**
- Авторизация по **почте**, по **номеру телефона**;

Для обеспечения безопасности и надежности функционирования приложения используется кратковременный **JWT Bearer-токен**.
При истечении срока действия access_token есть возможность по **refresh_token** получить новый **access_token**.

### Требования

- Python >= 3.9.5

### Установка
1. Клонируйте репозиторий:
   ```bash
   git clone 
2. Установите необходимые пакеты:
   ```bash
   pip install -r requirements.txt
3. Запуск приложения:
   ```bash
   python app.py


##### Структура проекта
При создании системы авторизации были поставлены две основные задачи:
1. Обеспечение безопасности приложения;
2. Реализация простой и современной регистрации и авторизации пользователя.

Все запросы, используемые в основном API делятся на:
1. Защищенные;
2. Не защищенные.

Защищенные запросы делятся на защиту по ролям пользователя. 

**Модуль Mail**

Выполняет функцию отправки сообщения по почте пользователю. Может использоваться как для рассылки, так и для отправки проверочного кода.
Использует протокол **SMTP** для отправки, что позволяет бесплатно отправлять сообщения и не зависеть от сторонних API.

**Модуль orm**

Выполняет функции подключения к БД.

`models.py` - файл создания моделей таблиц БД, необходимых для работы сервиса авторизации;

`router.py` - файл маршрутов методов API;

`schemas.py` - файл моделей входных данных для методов API и моделей ответов на запросы;

`service.py` - файл реализации методов API, основная логика сервиса авторизации;

`utils.py` - иные функции и методы, необходимые для работы: проверка и создание токенов, создание **QR-кодов**.
##### Дерево проекта

```commandline
├── images
│   ├── enotgpt.ico
│   └── enotgpt.png
├── mail
│   ├── __init__.py
│   └── MailClient.py
├── main.py
├── orm
│   ├── base_model.py
│   ├── __init__.py
│   └── session_manager.py
├── README.md
├── requirements.txt
└── src
    ├── __init__.py
    ├── models.py
    ├── router.py
    ├── schemas.py
    ├── service.py
    └── utils.py

```
